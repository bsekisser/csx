#include "soc_mmio_mpu_ihr.h"

#include "soc_mmio_omap.h"

/* **** */

#include "bitfield.h"
#include "err_test.h"
#include "log.h"

/* **** */

#include <errno.h>
#include <string.h>

/* **** */

#define MMIO_MPU_L1_IHR_LIST \
	MMIO(0xfffe, 0xcb00, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ITR) \
	MMIO(0xfffe, 0xcb04, 0xffff, 0xffff, 32, MEM_RW, MPU_L1_MIR) \
	MMIO(0xfffe, 0xcb18, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_CONTROL) \
	MMIO(0xfffe, 0xcb1c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR0) \
	MMIO(0xfffe, 0xcb20, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR1) \
	MMIO(0xfffe, 0xcb24, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR2) \
	MMIO(0xfffe, 0xcb28, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR3) \
	MMIO(0xfffe, 0xcb2c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR4) \
	MMIO(0xfffe, 0xcb30, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR5) \
	MMIO(0xfffe, 0xcb34, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR6) \
	MMIO(0xfffe, 0xcb38, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR7) \
	MMIO(0xfffe, 0xcb3c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR8) \
	MMIO(0xfffe, 0xcb40, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR9) \
	MMIO(0xfffe, 0xcb44, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR10) \
	MMIO(0xfffe, 0xcb48, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR11) \
	MMIO(0xfffe, 0xcb4c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR12) \
	MMIO(0xfffe, 0xcb50, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR13) \
	MMIO(0xfffe, 0xcb54, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR14) \
	MMIO(0xfffe, 0xcb58, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR15) \
	MMIO(0xfffe, 0xcb5c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR16) \
	MMIO(0xfffe, 0xcb60, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR17) \
	MMIO(0xfffe, 0xcb64, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR18) \
	MMIO(0xfffe, 0xcb68, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR19) \
	MMIO(0xfffe, 0xcb6c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR20) \
	MMIO(0xfffe, 0xcb70, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR21) \
	MMIO(0xfffe, 0xcb74, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR22) \
	MMIO(0xfffe, 0xcb78, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR23) \
	MMIO(0xfffe, 0xcb7c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR24) \
	MMIO(0xfffe, 0xcb80, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR25) \
	MMIO(0xfffe, 0xcb84, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR26) \
	MMIO(0xfffe, 0xcb88, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR27) \
	MMIO(0xfffe, 0xcb8c, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR28) \
	MMIO(0xfffe, 0xcb90, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR29) \
	MMIO(0xfffe, 0xcb94, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR30) \
	MMIO(0xfffe, 0xcb98, 0x0000, 0x0000, 32, MEM_RW, MPU_L1_ILR31) \

#define MMIO_MPU_L2_IHR_LIST \
	MMIO(0xfffe, 0x0000, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ITR) \
	MMIO(0xfffe, 0x0004, 0xffff, 0xffff, 32, MEM_RW, MPU_L2_MIR) \
	MMIO(0xfffe, 0x0018, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_CONTROL) \
	MMIO(0xfffe, 0x001c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR0) \
	MMIO(0xfffe, 0x0020, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR1) \
	MMIO(0xfffe, 0x0024, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR2) \
	MMIO(0xfffe, 0x0028, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR3) \
	MMIO(0xfffe, 0x002c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR4) \
	MMIO(0xfffe, 0x0030, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR5) \
	MMIO(0xfffe, 0x0034, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR6) \
	MMIO(0xfffe, 0x0038, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR7) \
	MMIO(0xfffe, 0x003c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR8) \
	MMIO(0xfffe, 0x0040, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR9) \
	MMIO(0xfffe, 0x0044, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR10) \
	MMIO(0xfffe, 0x0048, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR11) \
	MMIO(0xfffe, 0x004c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR12) \
	MMIO(0xfffe, 0x0050, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR13) \
	MMIO(0xfffe, 0x0054, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR14) \
	MMIO(0xfffe, 0x0058, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR15) \
	MMIO(0xfffe, 0x005c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR16) \
	MMIO(0xfffe, 0x0060, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR17) \
	MMIO(0xfffe, 0x0064, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR18) \
	MMIO(0xfffe, 0x0068, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR19) \
	MMIO(0xfffe, 0x006c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR20) \
	MMIO(0xfffe, 0x0070, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR21) \
	MMIO(0xfffe, 0x0074, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR22) \
	MMIO(0xfffe, 0x0078, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR23) \
	MMIO(0xfffe, 0x007c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR24) \
	MMIO(0xfffe, 0x0080, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR25) \
	MMIO(0xfffe, 0x0084, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR26) \
	MMIO(0xfffe, 0x0088, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR27) \
	MMIO(0xfffe, 0x008c, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR28) \
	MMIO(0xfffe, 0x0090, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR29) \
	MMIO(0xfffe, 0x0094, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR30) \
	MMIO(0xfffe, 0x0098, 0x0000, 0x0000, 32, MEM_RW, MPU_L2_ILR31) \

#define MMIO_MPU_L3_IHR_LIST \
	MMIO(0xfffe, 0x0100, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ITR) \
	MMIO(0xfffe, 0x0104, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_MIR) \
	MMIO(0xfffe, 0x011c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR0) \
	MMIO(0xfffe, 0x0120, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR1) \
	MMIO(0xfffe, 0x0124, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR2) \
	MMIO(0xfffe, 0x0128, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR3) \
	MMIO(0xfffe, 0x012c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR4) \
	MMIO(0xfffe, 0x0130, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR5) \
	MMIO(0xfffe, 0x0134, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR6) \
	MMIO(0xfffe, 0x0138, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR7) \
	MMIO(0xfffe, 0x013c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR8) \
	MMIO(0xfffe, 0x0140, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR9) \
	MMIO(0xfffe, 0x0144, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR10) \
	MMIO(0xfffe, 0x0148, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR11) \
	MMIO(0xfffe, 0x014c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR12) \
	MMIO(0xfffe, 0x0150, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR13) \
	MMIO(0xfffe, 0x0154, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR14) \
	MMIO(0xfffe, 0x0158, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR15) \
	MMIO(0xfffe, 0x015c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR16) \
	MMIO(0xfffe, 0x0160, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR17) \
	MMIO(0xfffe, 0x0164, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR18) \
	MMIO(0xfffe, 0x0168, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR19) \
	MMIO(0xfffe, 0x016c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR20) \
	MMIO(0xfffe, 0x0170, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR21) \
	MMIO(0xfffe, 0x0174, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR22) \
	MMIO(0xfffe, 0x0178, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR23) \
	MMIO(0xfffe, 0x017c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR24) \
	MMIO(0xfffe, 0x0180, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR25) \
	MMIO(0xfffe, 0x0184, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR26) \
	MMIO(0xfffe, 0x0188, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR27) \
	MMIO(0xfffe, 0x018c, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR28) \
	MMIO(0xfffe, 0x0190, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR29) \
	MMIO(0xfffe, 0x0194, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR30) \
	MMIO(0xfffe, 0x0198, 0x0000, 0x0000, 32, MEM_RW, MPU_L3_ILR31) \

#define MMIO_MPU_L4_IHR_LIST \
	MMIO(0xfffe, 0x0200, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ITR) \
	MMIO(0xfffe, 0x0204, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_MIR) \
	MMIO(0xfffe, 0x021c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR0) \
	MMIO(0xfffe, 0x0220, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR1) \
	MMIO(0xfffe, 0x0224, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR2) \
	MMIO(0xfffe, 0x0228, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR3) \
	MMIO(0xfffe, 0x022c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR4) \
	MMIO(0xfffe, 0x0230, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR5) \
	MMIO(0xfffe, 0x0234, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR6) \
	MMIO(0xfffe, 0x0238, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR7) \
	MMIO(0xfffe, 0x023c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR8) \
	MMIO(0xfffe, 0x0240, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR9) \
	MMIO(0xfffe, 0x0244, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR10) \
	MMIO(0xfffe, 0x0248, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR11) \
	MMIO(0xfffe, 0x024c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR12) \
	MMIO(0xfffe, 0x0250, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR13) \
	MMIO(0xfffe, 0x0254, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR14) \
	MMIO(0xfffe, 0x0258, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR15) \
	MMIO(0xfffe, 0x025c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR16) \
	MMIO(0xfffe, 0x0260, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR17) \
	MMIO(0xfffe, 0x0264, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR18) \
	MMIO(0xfffe, 0x0268, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR19) \
	MMIO(0xfffe, 0x026c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR20) \
	MMIO(0xfffe, 0x0270, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR21) \
	MMIO(0xfffe, 0x0274, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR22) \
	MMIO(0xfffe, 0x0278, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR23) \
	MMIO(0xfffe, 0x027c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR24) \
	MMIO(0xfffe, 0x0280, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR25) \
	MMIO(0xfffe, 0x0284, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR26) \
	MMIO(0xfffe, 0x0288, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR27) \
	MMIO(0xfffe, 0x028c, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR28) \
	MMIO(0xfffe, 0x0290, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR29) \
	MMIO(0xfffe, 0x0294, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR30) \
	MMIO(0xfffe, 0x0298, 0x0000, 0x0000, 32, MEM_RW, MPU_L4_ILR31) \

#define MMIO_MPU_L5_IHR_LIST \
	MMIO(0xfffe, 0x0300, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ITR) \
	MMIO(0xfffe, 0x0304, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_MIR) \
	MMIO(0xfffe, 0x031c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR0) \
	MMIO(0xfffe, 0x0320, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR1) \
	MMIO(0xfffe, 0x0324, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR2) \
	MMIO(0xfffe, 0x0328, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR3) \
	MMIO(0xfffe, 0x032c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR4) \
	MMIO(0xfffe, 0x0330, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR5) \
	MMIO(0xfffe, 0x0334, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR6) \
	MMIO(0xfffe, 0x0338, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR7) \
	MMIO(0xfffe, 0x033c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR8) \
	MMIO(0xfffe, 0x0340, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR9) \
	MMIO(0xfffe, 0x0344, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR10) \
	MMIO(0xfffe, 0x0348, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR11) \
	MMIO(0xfffe, 0x034c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR12) \
	MMIO(0xfffe, 0x0350, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR13) \
	MMIO(0xfffe, 0x0354, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR14) \
	MMIO(0xfffe, 0x0358, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR15) \
	MMIO(0xfffe, 0x035c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR16) \
	MMIO(0xfffe, 0x0360, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR17) \
	MMIO(0xfffe, 0x0364, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR18) \
	MMIO(0xfffe, 0x0368, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR19) \
	MMIO(0xfffe, 0x036c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR20) \
	MMIO(0xfffe, 0x0370, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR21) \
	MMIO(0xfffe, 0x0374, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR22) \
	MMIO(0xfffe, 0x0378, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR23) \
	MMIO(0xfffe, 0x037c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR24) \
	MMIO(0xfffe, 0x0380, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR25) \
	MMIO(0xfffe, 0x0384, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR26) \
	MMIO(0xfffe, 0x0388, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR27) \
	MMIO(0xfffe, 0x038c, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR28) \
	MMIO(0xfffe, 0x0390, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR29) \
	MMIO(0xfffe, 0x0394, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR30) \
	MMIO(0xfffe, 0x0398, 0x0000, 0x0000, 32, MEM_RW, MPU_L5_ILR31)


#define MMIO_LIST \
	MMIO_MPU_L1_IHR_LIST \
	MMIO_MPU_L2_IHR_LIST \
	MMIO_MPU_L3_IHR_LIST \
	MMIO_MPU_L4_IHR_LIST \
	MMIO_MPU_L5_IHR_LIST

#define TRACE_LIST
	#include "soc_mmio_trace.h"
#undef TRACE_LIST

static soc_mmio_peripheral_t ihr_peripheral[] = {
	{
		.base = CSX_MMIO_MPU_L1_IHR_BASE,
		.trace_list = trace_list,

	//	.reset = soc_mmio_mpu_ihr_reset,

	//	.read = soc_mmio_mpu_ihr_read,
	//	.write = soc_mmio_mpu_ihr_write
	}, {
		.base = CSX_MMIO_MPU_L2_IHR_BASE,
		.trace_list = trace_list,
	}, {
		.base = CSX_MMIO_MPU_L3_IHR_BASE,
		.trace_list = trace_list,
	}, {
		.base = CSX_MMIO_MPU_L4_IHR_BASE,
		.trace_list = trace_list,
	}, {
		.base = CSX_MMIO_MPU_L5_IHR_BASE,
		.trace_list = trace_list,
	},
};

int soc_mmio_mpu_ihr_init(csx_p csx, soc_mmio_p mmio, soc_mmio_mpu_ihr_h h2ihr)
{
	soc_mmio_mpu_ihr_p ihr;
	
	ERR_NULL(ihr = malloc(sizeof(soc_mmio_mpu_ihr_t)));
	if(!ihr)
		return(-1);

	ihr->csx = csx;
	ihr->mmio = mmio;

	*h2ihr = ihr;
	
	for(int i = 0; i < 5; i++)
		soc_mmio_peripheral(mmio, &ihr_peripheral[i], ihr);

	return(0);
}
